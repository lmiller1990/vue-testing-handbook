<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue-cli | Vue testing handbook</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/vue-testing-handbook/assets/css/36.styles.e9ac43e4.css" as="style"><link rel="preload" href="/vue-testing-handbook/assets/js/app.66ea62db.js" as="script"><link rel="preload" href="/vue-testing-handbook/assets/js/10.efe66933.js" as="script"><link rel="prefetch" href="/vue-testing-handbook/assets/js/19.386d48c2.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/1.17d43d53.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/2.98918e9c.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/3.0dc30dfb.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/4.ca54e971.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/5.59eddb01.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/6.06525efe.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/7.77075c41.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/8.e4109e7e.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/9.e0c57ef3.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/11.f9482afe.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/12.4ccbd87b.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/13.47bb5a7b.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/14.3ad8a4a1.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/15.165754cc.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/16.76c47991.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/17.fe9fabc3.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/18.166be994.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/0.cd484b0e.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/20.aaee44c3.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/21.ba9f266d.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/22.819054ff.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/23.3240af17.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/24.2aa71bba.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/25.fe3afffe.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/26.029c9284.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/27.aa5967e4.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/28.1602ff60.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/29.20fcff31.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/30.6c63856f.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/31.1ce276eb.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/32.ee38a2af.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/33.82f5e91a.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/34.fba50c76.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/35.f70721bc.js">
    <link rel="stylesheet" href="/vue-testing-handbook/assets/css/36.styles.e9ac43e4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/vue-testing-handbook/" class="home-link router-link-active"><!----><span class="site-name">
      Vue testing handbook
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/vue-testing-handbook/setting-up-for-tdd.html" class="nav-link router-link-exact-active router-link-active">en-US</a></li><li class="dropdown-item"><!----><a href="/vue-testing-handbook/ja/setting-up-for-tdd.html" class="nav-link">ja-JP</a></li></ul></div></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/vue-testing-handbook/setting-up-for-tdd.html" class="nav-link router-link-exact-active router-link-active">en-US</a></li><li class="dropdown-item"><!----><a href="/vue-testing-handbook/ja/setting-up-for-tdd.html" class="nav-link">ja-JP</a></li></ul></div></div><!----></nav><ul class="sidebar-links"><li><a href="/vue-testing-handbook/" class="sidebar-link">Welcome</a></li><li><a href="/vue-testing-handbook/rendering-a-component.html" class="sidebar-link">Getting Started</a></li><li><a href="/vue-testing-handbook/setting-up-for-tdd.html" class="active sidebar-link">Setting up for TDD</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue-testing-handbook/setting-up-for-tdd.html#vue-cli" class="sidebar-link">vue-cli</a></li><li class="sidebar-sub-header"><a href="/vue-testing-handbook/setting-up-for-tdd.html#writing-your-first-test" class="sidebar-link">Writing your first test</a></li><li class="sidebar-sub-header"><a href="/vue-testing-handbook/setting-up-for-tdd.html#making-assertions" class="sidebar-link">Making assertions</a></li></ul></li><li><a href="/vue-testing-handbook/components-with-props.html" class="sidebar-link">Testing Props</a></li><li><a href="/vue-testing-handbook/computed-properties.html" class="sidebar-link">Computed Properties</a></li><li><a href="/vue-testing-handbook/simulating-user-input.html" class="sidebar-link">Simulating user input</a></li><li><a href="/vue-testing-handbook/testing-emitted-events.html" class="sidebar-link">Testing emitted events</a></li><li><a href="/vue-testing-handbook/mocking-global-objects.html" class="sidebar-link">Mocking global objects</a></li><li><a href="/vue-testing-handbook/stubbing-components.html" class="sidebar-link">Stubbing components</a></li><li><a href="/vue-testing-handbook/finding-elements-and-components.html" class="sidebar-link">Finding elements and components</a></li><li><a href="/vue-testing-handbook/testing-vuex.html" class="sidebar-link">Testing Vuex</a></li><li><a href="/vue-testing-handbook/vuex-mutations.html" class="sidebar-link">Vuex - Mutations</a></li><li><a href="/vue-testing-handbook/vuex-actions.html" class="sidebar-link">Vuex - Actions</a></li><li><a href="/vue-testing-handbook/vuex-getters.html" class="sidebar-link">Vuex - Getters</a></li><li><a href="/vue-testing-handbook/vuex-in-components.html" class="sidebar-link">Vuex in components - $state and getters</a></li><li><a href="/vue-testing-handbook/vuex-in-components-mutations-and-getters.html" class="sidebar-link">Vuex in components - mutations and actions</a></li><li><a href="/vue-testing-handbook/jest-mocking-modules.html" class="sidebar-link">Jest - mocking modules</a></li><li><a href="/vue-testing-handbook/vue-router.html" class="sidebar-link">Vue Router</a></li></ul></div><div class="page"><div class="content"><h2 id="vue-cli"><a href="#vue-cli" aria-hidden="true" class="header-anchor">#</a> vue-cli</h2><p><code>vue-test-utils</code> is the official testing library for Vue, and will be used throughout the guide. It runs in both a browser and Node.js environment, and works with any test runner. We will be running our tests in a Node.js environment throughout this guide.</p><p><code>vue-cli</code> is the easiest way to get started. It will set up a project, as well as configure Jest, a popular testing framework. Install it by running:</p><div class="language-sh extra-class"><pre class="language-text"><code>yarn global add @vue/cli
</code></pre></div><p>or with npm:</p><div class="language-sh extra-class"><pre class="language-text"><code>npm install -g @vue/cli
</code></pre></div><p>Create a new project by running <code>vue create [project-name]</code>. Choose &quot;Manually select features&quot; and &quot;Unit Testing&quot;, and &quot;Jest&quot; for the test runner.</p><p>Once the installation finishes, <code>cd</code> into the project and run <code>yarn test:unit</code>. If everything went well, you should see:</p><div class="language- extra-class"><pre class="language-text"><code> PASS  tests/unit/HelloWorld.spec.js
  HelloWorld.vue
    ✓ renders props.msg when passed (26ms)

Test Suites: 1 passed, 1 total
Tests:       1 passed, 1 total
Snapshots:   0 total
Time:        2.074s
</code></pre></div><p>Congradulations, you just ran your first passing test!</p><h2 id="writing-your-first-test"><a href="#writing-your-first-test" aria-hidden="true" class="header-anchor">#</a> Writing your first test</h2><p>We ran an existing test that came with the project. Let's get our handy dirty, writing our own component, and a test. Traditionally when doing TDD, you write the failing test first, then implement the code which allows the test to pass. For now, we will write the component first.</p><p>We don't need <code>src/components/HelloWorld.vue</code> or <code>tests/unit/HelloWorld.spec.js</code> anymore, so you can delete those.</p><h3 id="creating-the-greeting-component"><a href="#creating-the-greeting-component" aria-hidden="true" class="header-anchor">#</a> Creating the <code>Greeting</code> component</h3><p>Create a <code>Greeting.vue</code> file in <code>src/components</code>. Inside <code>Greeting.vue</code>, add the following:</p><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    {{ greeting }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">&quot;Greeting&quot;</span><span class="token punctuation">,</span>

  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      greeting<span class="token punctuation">:</span> <span class="token string">&quot;Vue and TDD&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="writing-the-test"><a href="#writing-the-test" aria-hidden="true" class="header-anchor">#</a> Writing the test</h3><p><code>Greeting</code> has only one responsibility - to render the <code>greeting</code> value. The strategy will be:</p><ol><li>render the component with <code>mount</code></li><li>assert that the component's text contains &quot;Vue and TDD&quot;</li></ol><p>Create a <code>Greeting.spec.js</code> inside <code>tests/unit</code>. Inside, import <code>Greeting.vue</code>, as well as <code>mount</code>, and add the outline of the test:</p><div class="language- extra-class"><pre class="language-text"><code>import { mount } from '@vue/test-utils'
import Greeting from '@/components/Greeting.vue'

describe('Greeting.vue', () =&gt; {
  it('renders a greeting', () =&gt; {

  })
})
</code></pre></div><p>There are differnet syntaxes used for TDD, we will use the commonly seen <code>describe</code> and <code>it</code> syntax that comes with Jest. <code>describe</code> generally outlines what the test is about, in this case <code>Greeting.vue</code>. <code>it</code> represents a single piece of responsility that the subject of the test should fulfil. As we add more features to the component, we add more <code>it</code> blocks.</p><p>Now we should render the component with <code>mount</code>. The standard practice it to assign the component to a variable called <code>wrapper</code>. We will also print the output, to make sure everything is running correctly:</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token function">mount</span><span class="token punctuation">(</span>Greeting<span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="running-the-test"><a href="#running-the-test" aria-hidden="true" class="header-anchor">#</a> Running the test</h3><p>Run the test by typing <code>yarn test:unit</code> into your terminal. Any file in the <code>tests</code> directory ending with <code>.spec.js</code> is automatically executed. If everything went well, you should see:</p><div class="language- extra-class"><pre class="language-text"><code>PASS  tests/unit/Greeting.spec.js
Greeting.vue
  ✓ renders a greeting (27ms)

console.log tests/unit/Greeting.spec.js:7
  &lt;div&gt;
    Vue and TDD
  &lt;/div&gt;
</code></pre></div><p>We can see the markup is correct, and the test passes. The test is passing because there was no failure - this test can never fail, so it is very useful yet. Even if we change <code>Greeting.vue</code> and delete the <code></code>, it will still pass. Let's change that.</p><h2 id="making-assertions"><a href="#making-assertions" aria-hidden="true" class="header-anchor">#</a> Making assertions</h2><p>We need to make an assertion to ensure the component is behaving correctly. We can do that using Jest's <code>epxect</code> API. It looks like this: <code>expect(result).to [matcher] (actual)</code>.</p><p><em>Matchers</em> are methods to compare values and objects. For example:</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre></div><p>A full list of matchers available in the <a href="http://jestjs.io/docs/en/expect" target="_blank" rel="noopener noreferrer">Jest documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. <code>vue-test-utils</code> doesn't include any matchers - the ones Jest provides are more than enough. We want to compare the text from <code>Greeting</code>. We could write:</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">expect</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&quot;Vue and TDD&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
</code></pre></div><p>but <code>vue-test-utils</code> has an even better way to get the markup - <code>wrapper.text</code>. Let's finish the test off:</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> mount <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/test-utils'</span>
<span class="token keyword">import</span> Greeting <span class="token keyword">from</span> <span class="token string">'@/components/Greeting.vue'</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Greeting.vue'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'renders a greeting'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token function">mount</span><span class="token punctuation">(</span>Greeting<span class="token punctuation">)</span>

    <span class="token function">expect</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatch</span><span class="token punctuation">(</span><span class="token string">&quot;Vue and TDD&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>We don't need the <code>console.log</code> anymore, so you can delete that. Run the tests with <code>yarn unit:test</code>, and if everything went well you should get:</p><div class="language- extra-class"><pre class="language-text"><code>PASS  tests/unit/Greeting.spec.js
Greeting.vue
  ✓ renders a greeting (15ms)

Test Suites: 1 passed, 1 total
Tests:       1 passed, 1 total
Snapshots:   0 total
Time:        1.477s, estimated 2s
</code></pre></div><p>Looking good. But you should always see a test fail, then pass, to make sure it's really working. In traditional TDD, you would write the test before the actual implementation, see if fail, the use the failing errors to guide your code. Let's make sure this test is really working. Update <code>Greeting.vue</code>:</p><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    {{ greeting }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">&quot;Greeting&quot;</span><span class="token punctuation">,</span>

  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      greeting<span class="token punctuation">:</span> <span class="token string">&quot;Vue without TDD&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>And now run the test with <code>yarn test:unit</code>:</p><div class="language- extra-class"><pre class="language-text"><code>FAIL  tests/unit/Greeting.spec.js
Greeting.vue
  ✕ renders a greeting (24ms)

● Greeting.vue › renders a greeting

  expect(received).toMatch(expected)

  Expected value to match:
    &quot;Vue and TDD&quot;
  Received:
    &quot;Vue without TDD&quot;

     6 |     const wrapper = mount(Greeting)
     7 |
  &gt;  8 |     expect(wrapper.text()).toMatch(&quot;Vue and TDD&quot;)
       |                            ^
     9 |   })
    10 | })
    11 |

    at Object.&lt;anonymous&gt; (tests/unit/Greeting.spec.js:8:28)
</code></pre></div><p>Jest gives us good feedback. We can see the expected and actual result, as well as on which line the expectation failed. The test did fail, as expected. Revert <code>Greeting.vue</code> and make sure the test is passing again.</p><p>Next we will look at some of the options <code>vue-test-utils</code> provides, and how to tests components that use <code>props</code>.</p></div><div class="page-edit"><!----><!----></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/vue-testing-handbook/rendering-a-component.html" class="prev">
          Getting Started
        </a></span><span class="next"><a href="/vue-testing-handbook/components-with-props.html">
          Testing Props
        </a> →
      </span></p></div></div></div></div>
    <script src="/vue-testing-handbook/assets/js/10.efe66933.js" defer></script><script src="/vue-testing-handbook/assets/js/app.66ea62db.js" defer></script>
  </body>
</html>
