<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Testing Computed Properties | Vue testing handbook</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/vue-testing-handbook/assets/css/36.styles.e9ac43e4.css" as="style"><link rel="preload" href="/vue-testing-handbook/assets/js/app.5228fcb9.js" as="script"><link rel="preload" href="/vue-testing-handbook/assets/js/33.5e07cb40.js" as="script"><link rel="prefetch" href="/vue-testing-handbook/assets/js/19.b893a719.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/1.6d5162fb.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/2.075dc725.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/3.8d1cca21.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/4.b5912b05.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/5.1019eb54.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/6.023640f3.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/7.b3525567.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/8.2a117a1d.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/9.89df35b7.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/10.c242045a.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/11.fee18d04.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/12.6a95aad9.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/13.c5d9f866.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/14.601f9676.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/15.c8598dfe.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/16.608b0699.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/17.494dc7e9.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/18.7c327d0b.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/0.105da617.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/20.391e3f26.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/21.f7a2ad7d.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/22.dfc7731c.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/23.35d47ac9.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/24.95d44d95.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/25.99f8e0c3.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/26.45ab4540.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/27.f8d68708.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/28.00d9d771.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/29.6bd1cfbb.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/30.a069c4bd.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/31.e257b7dc.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/32.78d7bd02.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/34.aa9ab2f1.js"><link rel="prefetch" href="/vue-testing-handbook/assets/js/35.9f308e35.js">
    <link rel="stylesheet" href="/vue-testing-handbook/assets/css/36.styles.e9ac43e4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/vue-testing-handbook/" class="home-link router-link-active"><!----><span class="site-name">
      Vue testing handbook
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/vue-testing-handbook/computed-properties.html" class="nav-link router-link-exact-active router-link-active">en-US</a></li><li class="dropdown-item"><!----><a href="/vue-testing-handbook/ja/computed-properties.html" class="nav-link">ja-JP</a></li></ul></div></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/vue-testing-handbook/computed-properties.html" class="nav-link router-link-exact-active router-link-active">en-US</a></li><li class="dropdown-item"><!----><a href="/vue-testing-handbook/ja/computed-properties.html" class="nav-link">ja-JP</a></li></ul></div></div><!----></nav><ul class="sidebar-links"><li><a href="/vue-testing-handbook/" class="sidebar-link">Welcome</a></li><li><a href="/vue-testing-handbook/rendering-a-component.html" class="sidebar-link">Getting Started</a></li><li><a href="/vue-testing-handbook/setting-up-for-tdd.html" class="sidebar-link">Setting up for TDD</a></li><li><a href="/vue-testing-handbook/components-with-props.html" class="sidebar-link">Testing Props</a></li><li><a href="/vue-testing-handbook/computed-properties.html" class="active sidebar-link">Computed Properties</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vue-testing-handbook/simulating-user-input.html" class="sidebar-link">Simulating user input</a></li><li><a href="/vue-testing-handbook/testing-emitted-events.html" class="sidebar-link">Testing emitted events</a></li><li><a href="/vue-testing-handbook/mocking-global-objects.html" class="sidebar-link">Mocking global objects</a></li><li><a href="/vue-testing-handbook/stubbing-components.html" class="sidebar-link">Stubbing components</a></li><li><a href="/vue-testing-handbook/finding-elements-and-components.html" class="sidebar-link">Finding elements and components</a></li><li><a href="/vue-testing-handbook/testing-vuex.html" class="sidebar-link">Testing Vuex</a></li><li><a href="/vue-testing-handbook/vuex-mutations.html" class="sidebar-link">Vuex - Mutations</a></li><li><a href="/vue-testing-handbook/vuex-actions.html" class="sidebar-link">Vuex - Actions</a></li><li><a href="/vue-testing-handbook/vuex-getters.html" class="sidebar-link">Vuex - Getters</a></li><li><a href="/vue-testing-handbook/vuex-in-components.html" class="sidebar-link">Vuex in components - $state and getters</a></li><li><a href="/vue-testing-handbook/vuex-in-components-mutations-and-actions.html" class="sidebar-link">Vuex in components - mutations and actions</a></li><li><a href="/vue-testing-handbook/jest-mocking-modules.html" class="sidebar-link">Jest - mocking modules</a></li><li><a href="/vue-testing-handbook/vue-router.html" class="sidebar-link">Vue Router</a></li></ul></div><div class="page"><div class="content"><h3 id="testing-computed-properties"><a href="#testing-computed-properties" aria-hidden="true" class="header-anchor">#</a> Testing Computed Properties</h3><p>Testing computed properties are especially simple, since they are just plain old JavaScript functions.</p><p>Let's start with looking at two different ways to test a <code>computed</code> property. We will develop a <code>&lt;NumberRenderer&gt;</code> component, that renders either odd or even numbers, based on a <code>numbers</code> computed property.</p><h3 id="writing-the-test"><a href="#writing-the-test" aria-hidden="true" class="header-anchor">#</a> Writing the test</h3><p>The <code>&lt;NumberRenderer&gt;</code> component will receive an <code>even</code> prop, that is a boolean. If <code>even</code> is <code>true</code>, the component should render 2, 4, 6, and 8. If <code>false</code>, it should render 1, 3, 5, 7 and 9. The list of values will be calculated in a <code>computed</code> property called <code>numbers</code>.</p><h3 id="testing-by-rendering-the-value"><a href="#testing-by-rendering-the-value" aria-hidden="true" class="header-anchor">#</a> Testing by rendering the value</h3><p>The test:</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> shallowMount <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vue/test-utils&quot;</span>
<span class="token keyword">import</span> NumberRenderer <span class="token keyword">from</span> <span class="token string">&quot;@/components/NumberRenderer.vue&quot;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&quot;NumberRenderer&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;renders even numbers&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token function">shallowMount</span><span class="token punctuation">(</span>NumberRenderer<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      propsData<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        even<span class="token punctuation">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token function">expect</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&quot;2, 4, 6, 8&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>Before running the test, let's set up <code>&lt;NumberRenderer&gt;</code>:</p><div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  name: &quot;NumberRenderer&quot;,

  props: {
    even: {
      type: Boolean,
      required: true
    }
  }
}
&lt;/script&gt;
</code></pre></div><p>Now we start development, and let the error messages guide our implementation. <code>yarn test:unit</code> yields:</p><div class="language- extra-class"><pre class="language-text"><code>● NumberRenderer › renders even numbers

  expect(received).toBe(expected) // Object.is equality

  Expected: &quot;2, 4, 6, 8&quot;
  Received: &quot;&quot;
</code></pre></div><p>It looks like everything is hooked up correctly. Let's start implementing <code>numbers</code>:</p><div class="language-js extra-class"><pre class="language-js"><code>computed<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token function">numbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> evens <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        evens<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> evens
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>And update the template to use the new computed property:</p><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    {{ numbers }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>yarn test:unit</code> now yields:</p><div class="language- extra-class"><pre class="language-text"><code>FAIL  tests/unit/NumberRenderer.spec.js
● NumberRenderer › renders even numbers

  expect(received).toBe(expected) // Object.is equality

  Expected: &quot;2, 4, 6, 8&quot;
  Received: &quot;[
    2,
    4,
    6,
    8
  ]&quot;
</code></pre></div><p>The numbers are correct, but we want to render the list formatted nicely. Let's update the <code>return</code> value:</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">return</span> evens<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;, &quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>Now <code>yarn test:unit</code> passes!</p><h3 id="testing-with-call"><a href="#testing-with-call" aria-hidden="true" class="header-anchor">#</a> Testing with <code>call</code></h3><p>We will now add a test for the case of <code>even: false</code>. This time, we will see an alternative way to test a computed property, without actually rendering the component.</p><p>The test, first:</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;renders odd numbers&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> localThis <span class="token operator">=</span> <span class="token punctuation">{</span> even<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>NumberRenderer<span class="token punctuation">.</span>computed<span class="token punctuation">.</span>numbers<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>localThis<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&quot;1, 3, 5, 7, 9&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>Instead of rendering the component and making an assertion on <code>wrapper.text()</code>, we are using <code>call</code> to provide alternative <code>this</code> context to <code>numbers</code>. We will see what happens if we don't use <code>call</code> after we get the test to pass.</p><p>Running the current test yields:</p><div class="language- extra-class"><pre class="language-text"><code>FAIL  tests/unit/NumberRenderer.spec.js
● NumberRenderer › renders odd numbers

  expect(received).toBe(expected) // Object.is equality

  Expected: &quot;1, 3, 5, 7, 9&quot;
  Received: &quot;2, 4, 6, 8&quot;
</code></pre></div><p>Update <code>numbers</code>:</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">numbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> evens <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> odds <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      evens<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      odds<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>even <span class="token operator">===</span> <span class="token boolean">true</span> <span class="token operator">?</span> evens<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;, &quot;</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> odds<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;, &quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Now both tests pass! But what if we hadn't used <code>call</code> in the second test? Try updating it like so:</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;renders odd numbers&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> localThis <span class="token operator">=</span> <span class="token punctuation">{</span> even<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>NumberRenderer<span class="token punctuation">.</span>computed<span class="token punctuation">.</span><span class="token function">numbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">&quot;1, 3, 5, 7, 9&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>The test now fails:</p><div class="language- extra-class"><pre class="language-text"><code>FAIL  tests/unit/NumberRenderer.spec.js
● NumberRenderer › renders odd numbers

  expect(received).toBe(expected) // Object.is equality

  Expected: &quot;1, 3, 5, 7, 9&quot;
  Received: &quot;2, 4, 6, 8&quot;
</code></pre></div><p><code>vue</code> automatically binds <code>props</code> to <code>this</code>. We are not rendering the component with <code>mount</code>, though, so Vue isn't binding anything to <code>this</code>. If you do <code>console.log(this)</code>, you can see the context is simply the <code>computed</code> object:</p><div class="language- extra-class"><pre class="language-text"><code>{ numbers: [Function: numbers] }
</code></pre></div><p>So we need to use <code>call</code>, which lets us bind an alternative <code>this</code> object, in our case, one with a <code>even</code> property.</p><h3 id="to-call-or-to-shallowmount"><a href="#to-call-or-to-shallowmount" aria-hidden="true" class="header-anchor">#</a> To <code>call</code> or to <code>shallowMount</code>?</h3><p>Both techniques presented are useful for testing computed properties. Call can be useful when:</p><ul><li>You are testing a component that does some time consuming operations in a lifecycle methods you would like to avoid executing in your computed unit test.</li><li>You want to stub out some values on <code>this</code>. Using <code>call</code> and passing a custom context can be useful.</li></ul><p>Of course, you want to make sure the value is correctly rendered as well, so make sure you choose the correct technique when testing your computed properties, and test all the edge cases.</p></div><div class="page-edit"><!----><!----></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/vue-testing-handbook/components-with-props.html" class="prev">
          Testing Props
        </a></span><span class="next"><a href="/vue-testing-handbook/simulating-user-input.html">
          Simulating user input
        </a> →
      </span></p></div></div></div></div>
    <script src="/vue-testing-handbook/assets/js/33.5e07cb40.js" defer></script><script src="/vue-testing-handbook/assets/js/app.5228fcb9.js" defer></script>
  </body>
</html>
